<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <!-- Viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Primary SEO -->
    <title>Devaland Automation Agency | AI & Marketing Automation</title>
    <meta
      name="description"
      content="Devaland helps Shopify brands and service businesses grow revenue with AI automation, Klaviyo email flows, and Voice AI agents."
    />

    <!-- Theme -->
    <meta name="theme-color" content="#0b0f1a" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" />

    <!-- App manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Prevent FOUC -->
    <style>
      html {
        background-color: #0b0f1a;
      }
    </style>
  </head>

  <body>
    <!-- React root -->
    <div id="root"></div>

    <!--
      âš ï¸ INTENTIONALLY EMPTY
      - No GTM
      - No reCAPTCHA
      - No chat widget
      - No analytics
      These will be loaded conditionally later
    -->

<script>
  (function () {
    let chatLoaded = false;

    function loadChatWidget() {
      if (chatLoaded) return;
      chatLoaded = true;

      console.log("ðŸ¤– Loading chat widget after interaction");

      const script = document.createElement("script");
      script.src = "https://beta.leadconnectorhq.com/loader.js";
      script.async = true;
      script.setAttribute(
        "data-resources-url",
        "https://beta.leadconnectorhq.com/chat-widget/loader.js"
      );
      script.setAttribute(
        "data-widget-id",
        "692c19db36936d434b1c0208"
      );

      document.body.appendChild(script);

      // Remove listeners after load
      window.removeEventListener("scroll", triggerLoad);
      window.removeEventListener("mousemove", triggerLoad);
      window.removeEventListener("touchstart", triggerLoad);
      window.removeEventListener("keydown", triggerLoad);
    }

    function triggerLoad() {
      // Delay slightly to avoid blocking interaction
      setTimeout(loadChatWidget, 300);
    }

    // Interaction listeners
    window.addEventListener("scroll", triggerLoad, { once: true, passive: true });
    window.addEventListener("mousemove", triggerLoad, { once: true });
    window.addEventListener("touchstart", triggerLoad, { once: true, passive: true });
    window.addEventListener("keydown", triggerLoad, { once: true });
  })();
</script>
    
<script>
  (function () {
    let chatLoaded = false;

    function hasMarketingConsent() {
      try {
        const prefs = localStorage.getItem("cookiePreferences");
        if (!prefs) return false;
        const parsed = JSON.parse(prefs);
        return parsed.marketing === true;
      } catch (e) {
        return false;
      }
    }

    function loadChatWidget() {
      if (chatLoaded) return;
      if (!hasMarketingConsent()) {
        console.log("ðŸš« Chat not loaded â€” no marketing consent");
        return;
      }

      chatLoaded = true;
      console.log("ðŸ¤– Loading chat widget (consent + interaction)");

      const script = document.createElement("script");
      script.src = "https://beta.leadconnectorhq.com/loader.js";
      script.async = true;
      script.setAttribute(
        "data-resources-url",
        "https://beta.leadconnectorhq.com/chat-widget/loader.js"
      );
      script.setAttribute(
        "data-widget-id",
        "692c19db36936d434b1c0208"
      );

      document.body.appendChild(script);

      removeInteractionListeners();
    }

    function triggerLoad() {
      setTimeout(loadChatWidget, 300);
    }

    function removeInteractionListeners() {
      window.removeEventListener("scroll", triggerLoad);
      window.removeEventListener("mousemove", triggerLoad);
      window.removeEventListener("touchstart", triggerLoad);
      window.removeEventListener("keydown", triggerLoad);
    }

    // Interaction listeners
    window.addEventListener("scroll", triggerLoad, { once: true, passive: true });
    window.addEventListener("mousemove", triggerLoad, { once: true });
    window.addEventListener("touchstart", triggerLoad, { once: true, passive: true });
    window.addEventListener("keydown", triggerLoad, { once: true });

    // Listen for consent change (user accepts cookies later)
    window.addEventListener("storage", function (e) {
      if (e.key === "cookiePreferences" && hasMarketingConsent()) {
        console.log("âœ… Marketing consent granted â€” waiting for interaction");
      }
    });
  })();
</script>
    
    
  </body>
</html>
